---
title: "개인정보 수집 유효 기간 (프로그래머스)"
subtitle: "프로그래머스 daily question"
date: "2023-11-26"
summary: "개인정보 수집 유효 기간 - 프로그래머스 Level 1"
tags: ["Leetcode", "JavaScript", "프로그래머스", "Level 1"]
---

## Description

고객의 약관 동의를 얻어서 수집된 1~n번으로 분류되는 개인정보 n개가 있습니다. 약관 종류는 여러 가지 있으며 각 약관마다 개인정보 보관 유효기간이 정해져 있습니다. 당신은 각 개인정보가 어떤 약관으로 수집됐는지 알고 있습니다. 수집된 개인정보는 유효기간 전까지만 보관 가능하며, 유효기간이 지났다면 반드시 파기해야 합니다.

예를 들어, A라는 약관의 유효기간이 12 달이고, 2021년 1월 5일에 수집된 개인정보가 A약관으로 수집되었다면 해당 개인정보는 2022년 1월 4일까지 보관 가능하며 2022년 1월 5일부터 파기해야 할 개인정보입니다.
당신은 오늘 날짜로 파기해야 할 개인정보 번호들을 구하려 합니다.

모든 달은 28일까지 있다고 가정합니다.

다음은 오늘 날짜가 2022.05.19일 때의 예시입니다.

<table>
  <thead>
    <tr>
      <th>약관 종류</th>
      <th>유효기간</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>A</td>
      <td>6 달</td>
    </tr>
    <tr>
      <td>B</td>
      <td>12 달</td>
    </tr>
    <tr>
      <td>C</td>
      <td>3 달</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th>번호</th>
      <th>개인정보 수집 일자</th>
      <th>약관 종류</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>2021.05.02</td>
      <td>A</td>
    </tr>
    <tr>
      <td>2</td>
      <td>2021.07.01</td>
      <td>B</td>
    </tr>
    <tr>
      <td>3</td>
      <td>2022.02.19</td>
      <td>C</td>
    </tr>
    <tr>
      <td>4</td>
      <td>2022.02.20</td>
      <td>C</td>
    </tr>
  </tbody>
</table>


<ul>
  <li>첫 번째 개인정보는 A약관에 의해 2021년 11월 1일까지 보관 가능하며, 유효기간이 지났으므로 파기해야 할 개인정보입니다.</li>
  <li>두 번째 개인정보는 B약관에 의해 2022년 6월 28일까지 보관 가능하며, 유효기간이 지나지 않았으므로 아직 보관 가능합니다.</li>
  <li>세 번째 개인정보는 C약관에 의해 2022년 5월 18일까지 보관 가능하며, 유효기간이 지났으므로 파기해야 할 개인정보입니다.</li>
  <li>네 번째 개인정보는 C약관에 의해 2022년 5월 19일까지 보관 가능하며, 유효기간이 지나지 않았으므로 아직 보관 가능합니다.</li>
</ul>

따라서 파기해야 할 개인정보 번호는 [1, 3]입니다.

오늘 날짜를 의미하는 문자열 today, 약관의 유효기간을 담은 1차원 문자열 배열 terms와 수집된 개인정보의 정보를 담은 1차원 문자열 배열 privacies가 매개변수로 주어집니다. 이때 파기해야 할 개인정보의 번호를 오름차순으로 1차원 정수 배열에 담아 return 하도록 solution 함수를 완성해 주세요.

## 제한사항

- `today`는 `"YYYY . MM . DD"` 형태로 오늘 날짜를 나타냅니다.
- `1 ≤ terms의 길이 ≤ 20`
  - `terms`의 원소는 `"알파벳 소문자 유효기간"` 형태의 약관 종류와 유효기간을 표현한 문자열입니다.
  - 약관 종류는 `A ~ Z` 알파벳 대문자 하나이며, `terms` 배열에서 약관 종류는 중복되지 않습니다.
  - 유효기간은 그 약관이적용될 최소한 수 있는 달 수를 나타내는 정수이며, 1 이상 100 이하입니다.
- `1 ≤ privacies의 길이 ≤ 100`
  - `privacies[i]`는 `i+1` 번 개인정보의 수집 일자와 약관 종류를 나타냅니다.
  - `privacies`의 원소는 `"날짜 약관 종류"` 형태의 날짜 및 약관 종류를 표현한 문자열입니다.
  - 날짜는 `"YYYY . MM . DD"` 형태의 개인정보가 수집된 날짜를 나타냅니다, `today` 이전의 날짜만 주어집니다.
  - `privacies`의 약관 종류는 항상 `terms`에 나타난 약관 종류만 주어집니다.
- `today`와 `privacies`에 등장하는 날짜의 `YYYY`는 `년도`, `MM`은 `월`, `DD`는 `일`을 나타내며 점(`.`) 하나로 구분되어 있습니다.
  - `2000 ≤ YYYY ≤ 2022`
  - `1 ≤ MM ≤ 12`
    - `MM`이 한 자리수인 경우 앞에 0이 붙습니다.
  - `1 ≤ DD ≤ 28`
    - `DD`가 한 자리수인 경우 앞에 0이 붙습니다.
- 파기해야 할 개인정보가 하나 이상 존재하는 경우는 오름차순으로 출력합니다.

## 입출력 예

<table>
  <thead>
    <tr>
      <th>약관 종류</th>
      <th>유효기간</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Z</td>
      <td>3 달</td>
    </tr>
    <tr>
      <td>D</td>
      <td>5 달</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th>번호</th>
      <th>개인정보 수집 일자</th>
      <th>약관 종류</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>2019.01.01</td>
      <td>D</td>
    </tr>
    <tr>
      <td>2</td>
      <td>2019.11.15</td>
      <td>Z</td>
    </tr>
    <tr>
      <td>3</td>
      <td>2019.08.02</td>
      <td>D</td>
    </tr>
    <tr>
      <td>4</td>
      <td>2019.07.01</td>
      <td>D</td>
    </tr>
    <tr>
      <td>5</td>
      <td>2018.12.28</td>
      <td>Z</td>
    </tr>
  </tbody>
</table>

오늘 날짜는 2020년 1월 1일입니다.

<ul>
  <li>첫 번째 개인정보는 만료일에 해당 2019년 5월 28일까지 보관 가능하며, 유효기간이 지나오면 파기해야 할 개인정보입니다.</li>
  <li>두 번째 개인정보는 갱신일에 해당 2020년 2월 14일까지 보관 가능하며, 유효기간이 지나지 않았으므로 아직 보관 가능합니다.</li>
  <li>세 번째 개인정보는 만료일에 해당 2020년 1월 1일까지 보관 가능하며, 유효기간이 지나지 않았으므로 아직 보관 가능합니다.</li>
  <li>네 번째 개인정보는 만료일에 해당 2019년 11월 28일까지 보관 가능하며, 유효기간이 지나오면 파기해야 할 개인정보입니다.</li>
  <li>다섯 번째 개인정보는 갱신일에 해당 2019년 3월 27일까지 보관 가능하며, 유효기간이 지나오면 파기해야 할 개인정보입니다.</li>
</ul>

## Solution

```js
function solution(today, terms, privacies) {
    // 약관의 유효 기간을 저장할 객체
    const termDurations = {};
    // 각 약관과 유효기간을 분리하여 termDurations 객체에 저장
    terms.forEach(term => {
        const [type, duration] = term.split(" ");
        termDurations[type] = parseInt(duration);
    });

    // 문자열 형태의 날짜를 Date 객체로 변환하는 함수
    function toDate(dateString) {
        const [year, month, day] = dateString.split(".").map(Number);
        return new Date(year, month - 1, day);
    }

    // 특정 날짜에 월을 더하는 함수
    function addMonths(date, months) {
        const newDate = new Date(date);
        newDate.setMonth(newDate.getMonth() + months);
        // 한 달을 28일로 조정하는 로직
        if (newDate.getDate() > 28) {
            newDate.setDate(28);
        }
        return newDate;
    }

    // 개인정보 수집 날짜가 만료되었는지 확인하는 함수
    function isExpired(collectionDate, type) {
        const expirationDate = addMonths(toDate(collectionDate), termDurations[type]);
        return expirationDate <= toDate(today);
    }

    // 만료된 개인정보의 인덱스를 저장할 배열
    const result = [];
    // 각 개인정보의 수집 날짜와 유형을 확인하여 만료 여부를 결정
    privacies.forEach((privacy, index) => {
        const [collectionDate, type] = privacy.split(" ");
        if (isExpired(collectionDate, type)) {
            result.push(index + 1); // 만료된 경우 결과 배열에 추가 (인덱스는 1부터 시작)
        }
    });

    return result; // 결과 반환
}

// 함수를 호출하여 오늘 날짜, 약관의 종류와 기간, 개인정보 수집 일자와 종류를 기반으로
// 만료된 개인정보의 목록을 반환받습니다.
```